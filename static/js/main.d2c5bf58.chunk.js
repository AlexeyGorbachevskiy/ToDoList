(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{103:function(e,t,a){e.exports=a(132)},108:function(e,t,a){},129:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(9),r=a.n(o);a(108),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c,l,s=a(16),u=a(43),d=a(7),m=a(62),f=a(186),b=a(84),O=a.n(b).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"3de0712e-e19a-4637-bf5e-355c7a8ad46c"}}),E=function(){return O.get("todo-lists")},T=function(e){return O.post("todo-lists",{title:e})},g=function(e){return O.delete("todo-lists/".concat(e))},p=function(e,t){return O.put("todo-lists/".concat(e),{title:t})},j=function(e){return O.get("todo-lists/".concat(e,"/tasks"))},h=function(e,t){return O.post("todo-lists/".concat(e,"/tasks"),{title:t})},L=function(e,t){return O.delete("todo-lists/".concat(e,"/tasks/").concat(t))},v=function(e,t,a){return O.put("todo-lists/".concat(e,"/tasks/").concat(t),a)},k=function(e){return O.post("auth/login",e)},S=function(){return O.get("auth/me")},I=function(){return O.delete("auth/login")};!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(c||(c={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.High=2]="High",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(l||(l={}));var C=function(e,t){e.messages.length?t(_(e.messages[0])):t(_("Entered text length must be less than 101 symbol")),t(N("failed"))},y=function(e,t){t(_(e.message?e.message:"Some error is occurred")),t(N("failed"))},D={isLoggedIn:!1},w=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},A={status:"idle",error:null,isInitialized:!1},_=function(e){return{type:"SET-ERROR",error:e}},N=function(e){return{type:"SET-STATUS",status:e}},F=(Object(f.a)(),Object(f.a)(),[]),P=a(36),x={},R=function(e,t,a){return function(n,i){var o=i().tasks[a].find((function(t){return t.id===e}));if(o){var r=Object(d.a)({deadline:o.deadline,description:o.description,priority:o.priority,startDate:o.startDate,title:o.title,status:o.status},t);n(N("loading")),v(a,e,r).then((function(i){0===i.data.resultCode?(n(function(e,t,a){return{type:"UPDATE-TASK",id:e,model:t,todoListId:a}}(e,t,a)),n(N("succeeded"))):C(i.data,n)})).catch((function(e){y(e,n)}))}else console.warn("Task is not found in the state")}},H=a(85),G=Object(u.c)({todoLists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TODOLIST":return e.filter((function(e){return e.id!==t.id}));case"ADD-TODOLIST":return[Object(d.a)(Object(d.a)({},t.todoList),{},{filter:"all",entityStatus:"idle"})].concat(Object(m.a)(e));case"CHANGE-TODOLIST-TITLE":return e.map((function(e){return e.id===t.id?Object(d.a)(Object(d.a)({},e),{},{title:t.title}):e}));case"CHANGE-TODOLIST-FILTER":return e.map((function(e){return e.id===t.id?Object(d.a)(Object(d.a)({},e),{},{filter:t.value}):e}));case"SET-TODOLISTS":return t.todoLists.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{filter:"all",entityStatus:"idle"})}));case"CHANGE-TODOLIST-ENTITY-STATUS":return e.map((function(e){return e.id===t.id?Object(d.a)(Object(d.a)({},e),{},{entityStatus:t.status}):e}));default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TASK":return Object(d.a)(Object(d.a)({},e),{},Object(P.a)({},t.todoListId,e[t.todoListId].filter((function(e){return t.id!==e.id}))));case"ADD-TASK":return Object(d.a)(Object(d.a)({},e),{},Object(P.a)({},t.task.todoListId,[t.task].concat(Object(m.a)(e[t.task.todoListId]))));case"UPDATE-TASK":return Object(d.a)(Object(d.a)({},e),{},Object(P.a)({},t.todoListId,e[t.todoListId].map((function(e){return e.id===t.id?Object(d.a)(Object(d.a)({},e),t.model):e}))));case"ADD-TODOLIST":return Object(d.a)(Object(d.a)({},e),{},Object(P.a)({},t.todoList.id,[]));case"REMOVE-TODOLIST":var a=Object(d.a)({},e);return delete a[t.id],a;case"SET-TODOLISTS":var n=Object(d.a)({},e);return t.todoLists.forEach((function(e){n[e.id]=[]})),n;case"SET-TASKS":return Object(d.a)(Object(d.a)({},e),{},Object(P.a)({},t.todoListId,t.tasks));default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-STATUS":return Object(d.a)(Object(d.a)({},e),{},{status:t.status});case"SET-ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:t.error});case"APP/SET-INITIALIZED":return Object(d.a)(Object(d.a)({},e),{},{isInitialized:t.value});default:return Object(d.a)({},e)}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-IS-LOGGED-IN":return Object(d.a)(Object(d.a)({},e),{},{isLoggedIn:t.value});default:return e}}}),K=Object(u.d)(G,Object(u.a)(H.a));window.store=K;var M=a(32),U=(a(129),a(176)),V=a(177),q=a(178),z=a(169),B=a(134),J=a(172),W=a(180),Y=a(181),Z=a(179),Q=a(173),$=a(133),X=a(46),ee=a(55),te=a.n(ee),ae=a(182),ne=a(170),ie=i.a.memo((function(e){var t=e.disabled,a=void 0!==t&&t,o=Object(M.a)(e,["disabled"]),r=Object(n.useState)(""),c=Object(X.a)(r,2),l=c[0],s=c[1],u=Object(n.useState)(null),d=Object(X.a)(u,2),m=d[0],f=d[1],b=function(){s(""),""!==l.trim()?o.addItem(l):f("Title is required")};return i.a.createElement("div",null,i.a.createElement(ae.a,{disabled:a,id:"standard-basic",label:"Type text",error:!!m,helperText:m,onKeyPress:function(e){null!==m&&f(null),13===e.charCode&&b()},onChange:function(e){null!==m&&f(null),s(e.currentTarget.value)},value:l}),i.a.createElement(z.a,{disabled:a,color:"primary",className:te.a.add_btn,onClick:b},i.a.createElement(ne.a,null)))})),oe=i.a.memo((function(e){var t=Object(n.useState)(!1),a=Object(X.a)(t,2),o=a[0],r=a[1],c=Object(n.useState)(""),l=Object(X.a)(c,2),s=l[0],u=l[1];return i.a.createElement(i.a.Fragment,null,o?i.a.createElement(ae.a,{autoFocus:!0,value:s,onChange:function(e){return u(e.currentTarget.value)},onBlur:function(){r(!1),s.trim()?e.onChangeTitle(s):u(e.title)}}):i.a.createElement("span",{onDoubleClick:function(){u(e.title),r(!0)}},e.title))})),re=a(171),ce=a(184),le=i.a.memo((function(e){var t=Object(n.useCallback)((function(){return e.removeTask(e.task.id,e.todoListId)}),[e.removeTask,e.task.id,e.todoListId]),a=Object(n.useCallback)((function(t){return e.changeTaskStatus(e.task.id,t.currentTarget.checked?c.Completed:c.New,e.todoListId)}),[e.changeTaskStatus,e.task.id,e.todoListId]),o=Object(n.useCallback)((function(t){e.changeTaskTitle(e.task.id,t,e.todoListId)}),[e.changeTaskTitle,e.task.id,e.todoListId]);return i.a.createElement("div",{className:"completed"!==e.filter&&e.task.status===c.Completed?te.a.is_done:""},i.a.createElement(ce.a,{checked:e.task.status===c.Completed,onChange:a,value:"checkedA",inputProps:{"aria-label":"Checkbox A"}}),i.a.createElement(oe,{title:e.task.title,onChangeTitle:o}),i.a.createElement(z.a,{onClick:t,"aria-label":"delete"},i.a.createElement(re.a,null)))})),se=i.a.memo((function(e){var t=e.demo,a=void 0!==t&&t,o=Object(M.a)(e,["demo"]),r=Object(s.b)();Object(n.useEffect)((function(){var e;a||r((e=o.todoList.id,function(t){t(N("loading")),j(e).then((function(a){t(function(e,t){return{type:"SET-TASKS",tasks:e,todoListId:t}}(a.data.items,e)),t(N("succeeded"))}))}))}),[]);var l=Object(n.useCallback)((function(){return o.changeFilter("all",o.todoList.id)}),[o.changeFilter,o.todoList.id]),u=Object(n.useCallback)((function(){return o.changeFilter("active",o.todoList.id)}),[o.changeFilter,o.todoList.id]),d=Object(n.useCallback)((function(){return o.changeFilter("completed",o.todoList.id)}),[o.changeFilter,o.todoList.id]),m=Object(n.useCallback)((function(){return o.removeTodoList(o.todoList.id)}),[o.removeTodoList,o.todoList.id]),f=Object(n.useCallback)((function(e){return o.changeTodoListTitle(o.todoList.id,e)}),[o.changeTodoListTitle,o.todoList.id]),b=Object(n.useCallback)((function(e){o.addTask(e,o.todoList.id)}),[o.addTask,o.todoList.id]),O=o.tasks;return"active"===o.todoList.filter&&(O=o.tasks.filter((function(e){return e.status===c.New}))),"completed"===o.todoList.filter&&(O=o.tasks.filter((function(e){return e.status===c.Completed}))),i.a.createElement("div",null,i.a.createElement("h3",null,i.a.createElement(oe,{title:o.todoList.title,onChangeTitle:f}),i.a.createElement(z.a,{onClick:m,"aria-label":"delete",disabled:"loading"===o.todoList.entityStatus},i.a.createElement(re.a,null))),i.a.createElement(ie,{addItem:b,disabled:"loading"===o.todoList.entityStatus}),i.a.createElement("div",null,O.map((function(e){return i.a.createElement(le,{key:e.id,task:e,changeTaskStatus:o.changeTaskStatus,changeTaskTitle:o.changeTaskTitle,filter:o.todoList.filter,removeTask:o.removeTask,todoListId:o.todoList.id})}))),i.a.createElement("div",null,i.a.createElement(J.a,{variant:"all"===o.todoList.filter?"contained":"text",onClick:l},"All"),i.a.createElement(J.a,{color:"primary",variant:"active"===o.todoList.filter?"contained":"text",onClick:u},"Active"),i.a.createElement(J.a,{color:"secondary",variant:"completed"===o.todoList.filter?"contained":"text",onClick:d},"Completed")))})),ue=a(13),de=function(e){var t=e.demo,a=void 0!==t&&t,o=(Object(M.a)(e,["demo"]),Object(s.c)((function(e){return e.todoLists}))),r=Object(s.c)((function(e){return e.tasks})),c=Object(s.b)(),l=Object(s.c)((function(e){return e.login.isLoggedIn}));Object(n.useEffect)((function(){!a&&l&&c((function(e){e(N("loading")),E().then((function(t){e({type:"SET-TODOLISTS",todoLists:t.data}),e(N("succeeded"))})).catch((function(t){y(t,e)}))}))}),[]);var u=Object(n.useCallback)((function(e,t){c(function(e,t){return{type:"CHANGE-TODOLIST-FILTER",id:e,value:t}}(t,e))}),[c]),d=Object(n.useCallback)((function(e){var t,a=(t=e,function(e){e(N("loading")),e({type:"CHANGE-TODOLIST-ENTITY-STATUS",id:t,status:"loading"}),g(t).then((function(a){e({type:"REMOVE-TODOLIST",id:t}),e(N("succeeded"))}))});c(a)}),[c]),m=Object(n.useCallback)((function(e){var t,a=(t=e,function(e){e(N("loading")),T(t).then((function(t){0===t.data.resultCode?(e({type:"ADD-TODOLIST",todoList:t.data.data.item}),e(N("succeeded"))):C(t.data,e)})).catch((function(t){y(t,e)}))});c(a)}),[c]),f=Object(n.useCallback)((function(e,t){c(function(e,t){return function(a){p(e,t).then((function(n){a(function(e,t){return{type:"CHANGE-TODOLIST-TITLE",id:e,title:t}}(e,t))}))}}(e,t))}),[c]),b=Object(n.useCallback)((function(e,t){c(function(e,t){return function(a){a(N("loading")),h(e,t).then((function(e){0===e.data.resultCode?(a({type:"ADD-TASK",task:e.data.data.item}),a(N("succeeded"))):C(e.data,a)})).catch((function(e){y(e,a)}))}}(t,e))}),[c]),O=Object(n.useCallback)((function(e,t){c(function(e,t){return function(a){a(N("loading")),L(e,t).then((function(n){a(function(e,t){return{type:"REMOVE-TASK",id:e,todoListId:t}}(t,e)),a(N("succeeded"))}))}}(t,e))}),[c]),j=Object(n.useCallback)((function(e,t,a){c(R(e,{title:t},a))}),[c]),v=Object(n.useCallback)((function(e,t,a){c(R(e,{status:t},a))}),[c]);return l?i.a.createElement(i.a.Fragment,null,i.a.createElement(Q.a,{container:!0,style:{padding:"10px"}},i.a.createElement(ie,{addItem:m})),i.a.createElement(Q.a,{container:!0,spacing:3},o.map((function(e){var t=r[e.id];return i.a.createElement(Q.a,{key:e.id,item:!0},i.a.createElement($.a,{style:{padding:"10px"}},i.a.createElement(se,{key:e.id,todoList:e,tasks:t,changeFilter:u,removeTodoList:d,changeTodoListTitle:f,addTask:b,removeTask:O,changeTaskTitle:j,changeTaskStatus:v,demo:a})))})))):i.a.createElement(ue.a,{to:"/login"})},me=a(187),fe=a(183);function be(e){return i.a.createElement(fe.a,Object.assign({elevation:6,variant:"filled"},e))}function Oe(){var e=Object(s.c)((function(e){return e.app.error})),t=Object(s.b)(),a=function(e,a){"clickaway"!==a&&t(_(null))},n=null!==e;return i.a.createElement(me.a,{open:n,autoHideDuration:3e3,onClose:a},i.a.createElement(be,{onClose:a,severity:"error"},e))}var Ee=a(53),Te=a(188),ge=a(168),pe=a(174),je=a(175),he=a(91),Le=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.login.isLoggedIn})),a=Object(he.a)({validate:function(e){return e.email?e.password?void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(t){var a;e((a=t,function(e){e(N("loading")),k(a).then((function(t){0===t.data.resultCode?(e(w(!0)),e(N("succeeded"))):C(t.data,e)})).catch((function(t){y(t,e)}))}))}});return t?i.a.createElement(ue.a,{to:"/"}):i.a.createElement(Q.a,{container:!0,justify:"center"},i.a.createElement(Q.a,{item:!0,xs:4},i.a.createElement("form",{onSubmit:a.handleSubmit},i.a.createElement(Te.a,null,i.a.createElement(ge.a,null,i.a.createElement("p",null,"To log in get registered ",i.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),i.a.createElement("p",null,"Or ask me for my own credentials...")),i.a.createElement(pe.a,null,i.a.createElement(ae.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?i.a.createElement("div",null,a.errors.email):null,i.a.createElement(ae.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password?i.a.createElement("div",null,a.errors.password):null,i.a.createElement(je.a,Object.assign({label:"Remember me",control:i.a.createElement(ce.a,null)},a.getFieldProps("rememberMe"),{checked:a.values.rememberMe})),i.a.createElement(J.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},ve=i.a.memo((function(e){var t=e.demo,a=void 0!==t&&t,o=(Object(M.a)(e,["demo"]),Object(s.c)((function(e){return e.app.status}))),r=Object(s.c)((function(e){return e.app.isInitialized})),c=Object(s.b)(),l=Object(s.c)((function(e){return e.login.isLoggedIn}));Object(n.useEffect)((function(){c((function(e){S().then((function(t){0===t.data.resultCode&&e(w(!0)),e({type:"APP/SET-INITIALIZED",value:!0})}))}))}),[]);var u=Object(n.useCallback)((function(){c((function(e){e(N("loading")),I().then((function(t){0===t.data.resultCode?(e(w(!1)),e(N("succeeded"))):C(t.data,e)})).catch((function(t){y(t,e)}))}))}),[]);return r?i.a.createElement(Ee.a,null,i.a.createElement("div",{className:"App"},i.a.createElement(Oe,null),i.a.createElement(V.a,{position:"static"},i.a.createElement(q.a,null,i.a.createElement(z.a,{edge:"start",color:"inherit","aria-label":"menu"},i.a.createElement(Z.a,null)),i.a.createElement(B.a,{variant:"h6"},"News"),l&&i.a.createElement(J.a,{onClick:u,color:"inherit"},"Log out")),"loading"===o&&i.a.createElement(W.a,null)),i.a.createElement(Y.a,{fixed:!0},i.a.createElement(ue.b,{exact:!0,path:"/",render:function(){return i.a.createElement(de,{demo:a})}}),i.a.createElement(ue.b,{path:"/login",render:function(){return i.a.createElement(Le,null)}}),a&&i.a.createElement(ue.b,{path:"/",render:function(){return i.a.createElement(de,{demo:a})}})))):i.a.createElement("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}},i.a.createElement(U.a,null))}));r.a.render(i.a.createElement(s.a,{store:K},i.a.createElement(ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},55:function(e,t,a){e.exports={error:"ToDoList_error__2_s7a",error_message:"ToDoList_error_message__2wJHE",add_btn:"ToDoList_add_btn__15G-N",filter_btn:"ToDoList_filter_btn__2gnWH",active_filter:"ToDoList_active_filter__3hqwS",is_done:"ToDoList_is_done__1wQHF"}}},[[103,1,2]]]);
//# sourceMappingURL=main.d2c5bf58.chunk.js.map